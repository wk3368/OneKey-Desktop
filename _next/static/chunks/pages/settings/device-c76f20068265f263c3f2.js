_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[56],{Aq9J:function(e,t,i){"use strict";i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return R}));var n=i("ERkP"),a=i.n(n),s=i("j/s1"),l=i("nRYI"),d=i("r1NI"),o=i("4Vpd"),_=i("Tdcs"),c=i("jsNd"),E=i("4iMl"),r=i("Tlkh"),u=a.a.createElement;const T=Object(s.default)(d.j).withConfig({displayName:"SettingsMenu__StyledLink"})(["padding:10px 16px;width:100%;"]);var p=()=>{const{setDebugMode:e,openModal:t,goto:i}=Object(o.b)({openModal:_.openModal,goto:E.c,setDebugMode:c.p}),{0:a,1:s}=Object(n.useState)(0),p=Object(o.k)((e=>e.suite.settings.debug.showDebugMenu));return u(d.e,{maxWidth:"default",title:u("span",{"aria-hidden":"true",onClick:()=>{s((e=>e+1)),4===a&&(s(0),e({showDebugMenu:!p}))}},u(d.J,{id:"TR_SETTINGS"})),navigation:u(d.d,{items:[{title:u(d.J,{id:"TR_GENERAL"}),"data-test":"@settings/menu/general",icon:"SETTINGS",route:"settings-index"},{title:u(d.J,{id:"TR_DEVICE"}),"data-test":"@settings/menu/device",icon:"TREZOR",route:"settings-device"},{title:u(d.J,{id:"TR_COINS"}),"data-test":"@settings/menu/wallet",icon:"COINS",route:"settings-coins"}]}),dropdown:u(l.Dropdown,{alignMenu:"right","data-test":"@settings/menu/dropdown",items:[{key:"group1",options:[{key:"support",label:u(T,{size:"small",href:r.SUPPORT_URL},u(d.J,{id:"TR_SUPPORT"})),"data-test":"@settings/menu/support",callback:()=>{},noPadding:!0},{key:"log",label:u(d.J,{id:"TR_SHOW_LOG"}),"data-test":"@settings/menu/log",callback:()=>{t({type:"log"})}},{key:"debug",label:"Debug Settings","data-test":"@settings/menu/debug",isHidden:!p,callback:()=>{i("settings-debug")}}]}]})})},g=a.a.createElement;const S=s.default.div.withConfig({displayName:"SettingsLayout__Wrapper"})(["display:flex;flex:1;flex-direction:column;"]);var R=e=>{const{setLayout:t}=a.a.useContext(d.r);return a.a.useEffect((()=>{t&&t(e.title||"Settings",null,g(p,null))}),[e.title,t]),g(S,{"data-test":e["data-test"]},e.children)}},vljL:function(e,t,i){"use strict";i.r(t);var n=i("uDfI"),a=i("9OUN"),s=i("4iMl"),l=i("Tdcs"),d=i("y4dd"),o=i("ERkP"),_=i.n(o),c=i("j/s1"),E=i("Aq9J"),r=i("r1NI"),u=i("Y3DR"),T=i("Tlkh"),p=i("Zxgz"),g=i("V2qM"),S=i("4Vpd"),R=i("nRYI"),b=i("+8Xb"),I=i("s5jZ"),C=i("m0jy"),v=_.a.createElement;const h=Object(c.default)(u.a).withConfig({displayName:"device__RotationButton"})(["min-width:81px;margin:4px;flex-basis:45%;@media screen and (min-width:","){flex-basis:auto;}"],R.variables.SCREEN_SIZE.MD),D=c.default.input.withConfig({displayName:"device__HiddenInput"})(["display:none;"]),N=c.default.div.withConfig({displayName:"device__Col"})(["flex-direction:column;"]);var A=({device:e,applySettings:t,changePin:i,openModal:n,goto:a,changeUnlockPinMethod:s,unlockPin:l,passphraseShowSwitch:d,changeShowPassphraseSwitch:c,language:A})=>{var O,f,m,J,P,y,k;const{0:w,1:L}=Object(o.useState)(""),{0:M,1:V}=Object(o.useState)(""),G=Object(o.createRef)(),{isLocked:U}=Object(S.e)(),H=U(),j=Object(S.c)();if(Object(o.useEffect)((()=>{e&&L(e.label)}),[e]),null===e||void 0===e||!e.features)return null;const B=[{label:v(r.J,{id:"TR_NORTH"}),value:0},{label:v(r.J,{id:"TR_EAST"}),value:90},{label:v(r.J,{id:"TR_SOUTH"}),value:180},{label:v(r.J,{id:"TR_WEST"}),value:270}],{features:x}=e;return v(E.a,null,v(u.f,{title:v(r.J,{id:"TR_BACKUP"})},!x.unfinished_backup&&v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_BACKUP_RECOVERY_SEED"}),description:v(r.J,{id:"TR_BACKUP_SUBHEADING_1"}),learnMore:T.SEED_MANUAL_URL}),v(u.b,null,v(u.a,{"data-test":"@settings/device/create-backup-button",onClick:()=>{a("backup-index",{cancelable:!0}),j.report({type:"settings/device/goto/backup"})},isDisabled:H||!x.needs_backup||x.unfinished_backup},x.needs_backup&&v(r.J,{id:"TR_CREATE_BACKUP"}),!x.needs_backup&&!x.unfinished_backup&&v(r.J,{id:"TR_BACKUP_SUCCESSFUL"})))),x.unfinished_backup&&v(u.g,{"data-test":"@settings/device/failed-backup-row"},v(u.h,{title:v(r.J,{id:"TR_BACKUP_RECOVERY_SEED_FAILED_TITLE"}),description:v(r.J,{id:"TR_BACKUP_RECOVERY_SEED_FAILED_DESC"}),learnMore:T.FAILED_BACKUP_URL}),v(u.b,null,v(u.a,{isDisabled:!0},x.unfinished_backup&&v(r.J,{id:"TR_BACKUP_FAILED"})))),!x.unfinished_backup&&v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_CHECK_RECOVERY_SEED"}),description:v(r.J,{id:"TR_CHECK_RECOVERY_SEED_DESCRIPTION"}),learnMore:T.DRY_RUN_URL}),v(u.b,null,v(u.a,{"data-test":"@settings/device/check-seed-button",onClick:()=>{a("recovery-index",{cancelable:!0}),j.report({type:"settings/device/goto/recovery"})},isDisabled:H||x.needs_backup||x.unfinished_backup,variant:"secondary"},v(r.J,{id:"TR_CHECK_SEED"}))))),v(u.f,{title:v(r.J,{id:"TR_DEVICE_SECURITY"})},v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_FIRMWARE_VERSION"}),description:v(_.a.Fragment,null,v(r.J,{id:"TR_YOUR_CURRENT_FIRMWARE",values:{version:Object(p.g)(e)}}),Object(p.m)(e)&&" (bitcoin-only)")}),v(u.b,null,v(u.a,{variant:"secondary",onClick:()=>{a("firmware-index",{cancelable:!0}),j.report({type:"settings/device/goto/firmware"})},"data-test":"@settings/device/update-button",isDisabled:H},e&&["required","outdated"].includes(e.firmware)&&v(r.J,{id:"TR_UPDATE_AVAILABLE"}),e&&"valid"===e.firmware&&v(r.J,{id:"TR_UP_TO_DATE"})))),v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_BLE_FIRMWARE_VERSION"}),description:v(_.a.Fragment,null,v(r.J,{id:"TR_YOUR_CURRENT_BLE_FIRMWARE",values:{version:null!==(O=x.ble_ver)&&void 0!==O?O:"-"}}))}),v(u.b,null,v(u.a,{variant:"secondary",onClick:()=>{a("ble-firmware-index",{cancelable:!0}),j.report({type:"settings/device/goto/firmware"})},"data-test":"@settings/device/update-button",isDisabled:H},e&&Object(I.e)(null!==(f=null===(m=window.$BLE_DATA)||void 0===m?void 0:m.version.split(".").map(Number))&&void 0!==f?f:[1,0,0],Object(C.a)(null===e||void 0===e||null===(J=e.features)||void 0===J?void 0:J.ble_ver))&&v(r.J,{id:"TR_UPDATE_AVAILABLE"}),e&&Object(I.f)(Object(C.a)(null===e||void 0===e||null===(P=e.features)||void 0===P?void 0:P.ble_ver),null!==(y=null===(k=window.$BLE_DATA)||void 0===k?void 0:k.version.split(".").map(Number))&&void 0!==y?y:[1,0,0])&&v(r.J,{id:"TR_UP_TO_DATE"})))),v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_DEVICE_SETTINGS_PIN_PROTECTION_TITLE"}),description:v(r.J,{id:"TR_DEVICE_SETTINGS_PIN_PROTECTION_DESC"})}),v(u.b,null,v(R.Switch,{checked:!!x.pin_protection,onChange:async()=>{await i({remove:x.pin_protection}),s(""),j.report({type:"settings/device/change-pin-protection",payload:{remove:x.pin_protection}})},isDisabled:H,"data-test":"@settings/device/pin-switch"}))),x.pin_protection&&v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_DEVICE_SETTINGS_CHANGE_PIN_TITLE"}),description:v(r.J,{id:"TR_DEVICE_SETTINGS_CHANGE_PIN_DESC"})}),v(u.b,null,v(u.a,{onClick:()=>{i({remove:!1}),j.report({type:"settings/device/change-pin"})},isDisabled:H,variant:"secondary"},v(r.J,{id:"TR_CHANGE_PIN"})))),x.pin_protection&&v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_DEVICE_SETTINGS_CHANGE_PIN_METHOD_TITLE"}),description:v(r.J,{id:"TR_DEVICE_SETTINGS_CHANGE_PIN_METHOD_DESCRIPTION"})}),v(u.b,null,v(u.d,{hideTextCursor:!0,useKeyPressScroll:!0,noTopLabel:!0,placeholder:v(r.J,{id:"TR_DEVICE_SETTINGS_CHANGE_PIN_METHOD_PLACEHOLDER"}),"data-test":"@settings/unlock-pin-method-select",options:b.f.map((e=>{var t;return{value:e.code,label:null!==(t=e[A])&&void 0!==t?t:e.zh}})),onChange:e=>{s(e.value)},value:l?{value:l,label:b.f.find((e=>e.code===l))[A]}:null}))),v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_DEVICE_SETTINGS_PASSPHRASE_TITLE"}),description:v(_.a.Fragment,null,v(r.J,{id:"TR_DEVICE_SETTINGS_PASSPHRASE_DESC"}),v(r.J,{id:"TR_DEVICE_SETTINGS_PASSPHRASE_DESC_MORE"}))}),v(u.b,null,v(R.Switch,{checked:!!x.passphrase_protection,onChange:async()=>{const e=await t({use_passphrase:!x.passphrase_protection});null!==e&&void 0!==e&&e.success&&c(!1),j.report({type:"settings/device/change-passphrase-protection",payload:{use_passphrase:!x.passphrase_protection}})},"data-test":"@settings/device/passphrase-switch",isDisabled:H}))),x.passphrase_protection&&v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_DEVICE_SETTINGS_PASSPHRASE_DEFAULT_SHOW_SWITCH_TITLE"}),description:v(r.J,{id:"TR_DEVICE_SETTINGS_PASSPHRASE_DEFAULT_SHOW_SWITCH_DESCRIPTION"})}),v(u.b,null,v(R.Switch,{checked:!!d,onChange:()=>{c(!d)},"data-test":"@settings/device/passphrase-switch",isDisabled:H})))),v(u.f,{title:v(r.J,{id:"TR_PERSONALIZATION"})},v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_DEVICE_SETTINGS_DEVICE_LABEL"}),description:v(r.J,{id:"TR_MAX_LABEL_LENGTH_IS",values:{length:16}})}),v(u.b,null,v(u.c,{noTopLabel:!0,noError:!0,value:w,state:w.length>16?"error":void 0,onChange:e=>L(e.currentTarget.value),"data-test":"@settings/device/label-input",readOnly:H}),v(u.a,{onClick:()=>{t({label:w}),j.report({type:"settings/device/change-label"})},isDisabled:H||w.length>16||w===e.label,"data-test":"@settings/device/label-submit"},v(r.J,{id:"TR_DEVICE_SETTINGS_DEVICE_EDIT_LABEL"})))),v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_DEVICE_SETTINGS_HOMESCREEN_TITLE"}),description:2===x.major_version?v(r.J,{id:"TR_DEVICE_SETTINGS_HOMESCREEN_IMAGE_SETTINGS"}):""}),v(u.b,null,v(D,{ref:G,type:"file",accept:".png, .jpg",onChange:e=>{(async e=>{if(!e||!e.length)return;const t=await g.b(e[0]);V(t)})(e.target.files)}}),2===x.major_version&&v(u.a,{onClick:()=>{G.current&&G.current.click()},isDisabled:H,variant:"secondary"},v(r.J,{id:"TR_DEVICE_SETTINGS_HOMESCREEN_UPLOAD_IMAGE"})),v(u.a,{onClick:()=>{n({type:"device-background-gallery",device:e}),j.report({type:"settings/device/goto/background"})},isDisabled:H,"data-test":"@settings/device/select-from-gallery",variant:"secondary"},v(r.J,{id:"TR_DEVICE_SETTINGS_HOMESCREEN_SELECT_FROM_GALLERY"})))),M&&g.c(M)&&v(u.g,null,v(N,null,v("img",{width:"144px",alt:"custom homescreen",id:"custom-image",src:M})),v(u.b,null,v(u.a,{onClick:()=>(async()=>{const i=document.getElementById("custom-image");if(i instanceof HTMLImageElement){const n=g.a(i,e.features.major_version);await t({homescreen:n}),V("")}})()},v(r.J,{id:"TR_CHANGE_HOMESCREEN"})),v(u.a,{variant:"secondary",onClick:()=>V(""),isDisabled:H},v(r.J,{id:"TR_DROP_IMAGE"})))),M&&!g.c(M)&&v(u.g,null,v(N,null,v(r.J,{id:"TR_INVALID_FILE_SELECTED"})),v(u.b,null,v(u.a,{variant:"secondary",onClick:()=>V(""),isDisabled:H},v(r.J,{id:"TR_DROP_IMAGE"})))),2===x.major_version&&v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_DEVICE_SETTINGS_DISPLAY_ROTATION"})}),v(u.b,null,B.map((e=>v(h,{key:e.value,variant:"secondary",onClick:()=>{t({display_rotation:e.value}),j.report({type:"settings/device/change-orientation",payload:{value:e.value}})},"data-test":`@settings/device/rotation-button/${e.value}`,isDisabled:H},e.label)))))),v(u.f,{title:v(r.J,{id:"TR_ADVANCED"})},v(u.g,null,v(u.h,{title:v(r.J,{id:"TR_DEVICE_SETTINGS_BUTTON_WIPE_DEVICE"}),description:v(r.J,{id:"TR_WIPING_YOUR_DEVICE"})}),v(u.b,null,v(u.a,{onClick:()=>{n({type:"wipe-device"}),j.report({type:"settings/device/goto/wipe"})},variant:"danger",isDisabled:H,"data-test":"@settings/device/open-wipe-modal-button"},v(r.J,{id:"TR_DEVICE_SETTINGS_BUTTON_WIPE_DEVICE"}))))))};var O=Object(n.b)((e=>({language:e.suite.settings.language,device:e.suite.device,unlockPin:e.suite.settings.unlockPin,passphraseShowSwitch:e.suite.settings.passphraseShowSwitch})),(e=>Object(a.b)({applySettings:d.a,changePin:d.b,goto:s.c,openModal:l.openModal,changeUnlockPinMethod:d.d,changeShowPassphraseSwitch:d.c},e)))(A);t.default=O},yMFN:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/device",function(){return i("vljL")}])}},[["yMFN",0,1,7,13,10,3,15,8,11,9,14,6,12,5,16,2,4]]]);
//# sourceMappingURL=device-c76f20068265f263c3f2.js.map