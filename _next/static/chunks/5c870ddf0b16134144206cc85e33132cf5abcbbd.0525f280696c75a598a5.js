(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"A/8A":function(e,t,n){"use strict";var a=n("cxan"),i=n("zjfJ"),r=n("ERkP"),o=n.n(r),l=n("geiN"),u=n("e3wq"),c=n("aNLf"),s=n("4Vpd"),d=n("hxOz"),p=n("7x6D"),f=n("uDP8"),m=n("4iMl"),y=n("gzvV");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const v=Object(r.createContext)(null);v.displayName="CoinmarketBuyContext";const O=()=>{const e=Object(r.useContext)(v);if(null===e)throw Error("BuyFormContext used without Context");return e};var g=n("9+6G"),h=n("uDfI"),C=n("j/s1"),I=n("r1NI"),x=n("nRYI"),w=n("+8Xb"),N=n("vM3x"),S=n.n(N),R=n("vN4V"),T=n("o0PC"),E=o.a.createElement;const A=C.default.div.withConfig({displayName:"Inputs__Wrapper"})(["display:flex;flex:1;@media screen and (max-width:","){flex-direction:column;}"],x.variables.SCREEN_SIZE.LG),j=C.default.div.withConfig({displayName:"Inputs__Left"})(["display:flex;flex:1;"]),F=C.default.div.withConfig({displayName:"Inputs__Right"})(["display:flex;flex:1;justify-content:flex-end;"]),L=C.default.div.withConfig({displayName:"Inputs__Middle"})(["display:flex;min-width:65px;height:48px;align-items:center;justify-content:center;@media screen and (max-width:","){padding-bottom:27px;}"],x.variables.SCREEN_SIZE.LG),M=Object(C.default)(x.Icon).withConfig({displayName:"Inputs__StyledIcon"})(["@media screen and (max-width:","){transform:rotate(90deg);}"],x.variables.SCREEN_SIZE.LG);var U=()=>{const{register:e,errors:t,trigger:n,watch:a,account:i,network:o,control:u,setValue:c,clearErrors:s,formState:p,amountLimits:f,buyInfo:m,setAmountLimits:b,defaultCurrency:_,accountHasCachedRequest:v,quotesRequest:h}=O(),{symbol:C}=i,N=C.toUpperCase(),U="fiatInput",P="cryptoInput",{0:D,1:B}=Object(r.useState)(U);return a("cryptoInput")&&!t.cryptoInput&&D===U&&B(P),Object(r.useEffect)((()=>{n([D])}),[D,f,n]),E(A,null,E(j,null,E(x.Input,{noTopLabel:!0,defaultValue:v&&h?h.fiatStringAmount:"",innerRef:e({validate:e=>{if(D===U){if(!e)return p.isSubmitting?E(I.J,{id:"TR_BUY_VALIDATION_ERROR_EMPTY"}):void 0;const t=new S.a(e);if(t.isNaN())return E(I.J,{id:"AMOUNT_IS_NOT_NUMBER"});if(t.lte(0))return E(I.J,{id:"AMOUNT_IS_TOO_LOW"});if(!Object(R.d)(e,2))return E(I.J,{id:"AMOUNT_IS_NOT_IN_RANGE_DECIMALS",values:{decimals:2}});if(f){const t=Number(e);if(f.minFiat&&t<f.minFiat)return E(I.J,{id:"TR_BUY_VALIDATION_ERROR_MINIMUM_FIAT",values:{minimum:f.minFiat,currency:f.currency}});if(f.maxFiat&&t>f.maxFiat)return E(I.J,{id:"TR_BUY_VALIDATION_ERROR_MAXIMUM_FIAT",values:{maximum:f.maxFiat,currency:f.currency}})}}}}),onFocus:()=>{B(U)},onChange:()=>{B(U),c(P,""),s(P)},state:t.fiatInput?"error":void 0,name:U,maxLength:T.a.AMOUNT,bottomText:E(g.q,{error:t.fiatInput}),innerAddon:E(l.a,{control:u,name:"currencySelect",defaultValue:v&&null!==h&&void 0!==h&&h.fiatCurrency?{label:h.fiatCurrency.toUpperCase(),value:h.fiatCurrency.toUpperCase()}:_,render:({onChange:e,value:t})=>E(x.Select,{options:w.b.currencies.filter((e=>null===m||void 0===m?void 0:m.supportedFiatCurrencies.has(e))).map((e=>Object(d.a)(e))),isSearchable:!0,value:t,isClearable:!1,minWidth:"45px",isClean:!0,hideTextCursor:!0,onChange:t=>{e(t),b(void 0)}})})})),E(L,null,E(M,{icon:"TRANSFER",size:16})),E(F,null,E(x.Input,{onFocus:()=>{B(P)},onChange:()=>{c(U,""),s(U)},defaultValue:v&&h?h.cryptoStringAmount:"",state:t.cryptoInput?"error":void 0,name:P,noTopLabel:!0,maxLength:T.a.AMOUNT,innerRef:e({validate:e=>{if(D===P){if(!e)return p.isSubmitting?E(I.J,{id:"TR_BUY_VALIDATION_ERROR_EMPTY"}):void 0;const t=new S.a(e);if(t.isNaN())return E(I.J,{id:"AMOUNT_IS_NOT_NUMBER"});if(t.lte(0))return E(I.J,{id:"AMOUNT_IS_TOO_LOW"});if(!Object(R.d)(e,o.decimals))return E(I.J,{id:"AMOUNT_IS_NOT_IN_RANGE_DECIMALS",values:{decimals:o.decimals}});if(f){const t=Number(e);if(f.minCrypto&&t<f.minCrypto)return E(I.J,{id:"TR_BUY_VALIDATION_ERROR_MINIMUM_CRYPTO",values:{minimum:f.minCrypto,currency:f.currency}});if(f.maxCrypto&&t>f.maxCrypto)return E(I.J,{id:"TR_BUY_VALIDATION_ERROR_MAXIMUM_CRYPTO",values:{maximum:f.maxCrypto,currency:f.currency}})}}}}),bottomText:E(g.q,{error:t.cryptoInput}),innerAddon:E(l.a,{control:u,name:"cryptoSelect",defaultValue:v&&null!==h&&void 0!==h&&h.receiveCurrency?{label:h.receiveCurrency.toUpperCase(),value:h.receiveCurrency.toUpperCase()}:{value:N,label:N},render:({onChange:e,value:t})=>E(x.Select,{onChange:t=>{e(t)},value:t,isClearable:!1,options:Object(y.e)(i.symbol,i.networkType),isClean:!0,hideTextCursor:!0,isDropdownVisible:"ethereum"===i.networkType,isDisabled:"ethereum"!==i.networkType,minWidth:"70px"})})})))},P=o.a.createElement;const D=C.default.div.withConfig({displayName:"Footer__Wrapper"})(["display:flex;align-items:center;padding-top:30px;border-top:1px solid ",";@media screen and (max-width:","){flex-direction:column;}"],(e=>e.theme.STROKE_GREY),x.variables.SCREEN_SIZE.SM),B=C.default.div.withConfig({displayName:"Footer__OptionLabel"})(["display:flex;align-items:center;"]),q=C.default.div.withConfig({displayName:"Footer__FlagWrapper"})(["padding-right:10px;"]),Y=C.default.div.withConfig({displayName:"Footer__LabelText"})(["font-size:",";font-weight:",";color:",";"],x.variables.FONT_SIZE.SMALL,x.variables.FONT_WEIGHT.MEDIUM,(e=>e.theme.TYPE_DARK_GREY)),V=C.default.div.withConfig({displayName:"Footer__Left"})(["display:flex;flex:1;"]),k=C.default.div.withConfig({displayName:"Footer__Right"})(["display:flex;flex:1;justify-content:flex-end;@media screen and (max-width:","){justify-content:flex-start;}"],x.variables.SCREEN_SIZE.SM),J=C.default.div.withConfig({displayName:"Footer__Label"})(["display:flex;align-items:center;white-space:nowrap;padding-top:1px;color:",";font-weight:",";"],(e=>e.theme.TYPE_LIGHT_GREY),x.variables.FONT_WEIGHT.MEDIUM),G=Object(C.default)(x.Button).withConfig({displayName:"Footer__StyledButton"})(["display:flex;min-width:200px;margin-left:20px;@media screen and (max-width:","){margin-top:20px;margin-left:0;width:100%;}"],x.variables.SCREEN_SIZE.SM),W=Object(C.default)(x.Select).withConfig({displayName:"Footer__StyledSelect"})(["width:max-content;"]);var Z=()=>{const{errors:e,control:t,formState:n,watch:a,setAmountLimits:i,defaultCountry:r,accountHasCachedRequest:o,quotesRequest:u}=O(),c=(a("fiatInput")||a("cryptoInput"))&&!!a("currencySelect").value,s=0===Object.keys(e).length;return P(D,null,P(V,null,P(J,null,P(I.J,{id:"TR_BUY_OFFERS_FOR"})),P(l.a,{control:t,defaultValue:o&&null!==u&&void 0!==u&&u.country?{label:p.a.countriesMap.get(u.country),value:u.country}:r,name:"countrySelect",render:({onChange:e,value:t})=>P(W,{noTopLabel:!0,isDropdownVisible:!0,isHovered:!0,options:p.a.countriesOptions,isSearchable:!0,value:t,formatOptionLabel:e=>{const t=Object(y.d)(e.label);return t?P(B,null,P(q,null,P(x.Flag,{country:e.value})),P(Y,null,t.text)):null},isClearable:!1,minWidth:"160px",isClean:!0,hideTextCursor:!0,onChange:t=>{e(t),i(void 0)},maxSearchLength:12})})),P(k,null,P(G,{isDisabled:!(s&&c)||n.isSubmitting,isLoading:n.isSubmitting,type:"submit"},P(I.J,{id:"TR_BUY_SHOW_OFFERS"}))))},H=o.a.createElement;const z=C.default.div.withConfig({displayName:"BuyForm__Wrapper"})(["display:flex;flex-direction:column;flex:1;@media screen and (max-width:","){padding:0;}"],x.variables.SCREEN_SIZE.LG),Q=C.default.form.withConfig({displayName:"BuyForm__Form"})([""]),X=C.default.div.withConfig({displayName:"BuyForm__Loading"})(["display:flex;font-size:",";"],x.variables.FONT_SIZE.BIG),K=C.default.div.withConfig({displayName:"BuyForm__NoProviders"})(["display:flex;font-size:",";"],x.variables.FONT_SIZE.BIG);var $=()=>{const{onSubmit:e,handleSubmit:t,isLoading:n,noProviders:a}=O();return H(z,null,n&&H(X,null,H(I.J,{id:"TR_BUY_LOADING"})),!n&&a&&H(K,null,H(I.J,{id:"TR_BUY_NO_PROVIDERS"})),!n&&!a&&H(Q,{onSubmit:t(e)},H(U,null),H(Z,null)))},ee=o.a.createElement;function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ae=e=>{const{selectedAccount:t}=e,n=(e=>{var t,n,a;const{selectedAccount:i,cachedAccountInfo:o,quotesRequest:b}=e,{buyInfo:v}=Object(u.b)(),{account:O,network:g}=i,{0:h,1:C}=Object(r.useState)(void 0),I=Object(l.c)({mode:"onChange"}),{saveQuoteRequest:x,saveQuotes:w,saveCachedAccountInfo:N,saveTrade:S,goto:R}=Object(s.b)({saveQuoteRequest:c.f,saveQuotes:c.g,saveCachedAccountInfo:c.e,saveTrade:c.h,goto:m.c}),{register:T}=I,E=(null===v||void 0===v||null===(t=v.buyInfo)||void 0===t?void 0:t.country)||p.a.unknownCountry,A={label:p.a.countriesMap.get(E),value:E},j=null===v||void 0===v||null===(n=v.buyInfo)||void 0===n?void 0:n.suggestedFiatCurrency,F=j?Object(d.a)(j):{label:"USD",value:"usd"},L=O.symbol===o.symbol&&O.index===o.index&&O.accountType===o.accountType,M=Object(r.useCallback)((e=>T(e)),[T]),U=!v||!(null!==v&&void 0!==v&&v.buyInfo),P=!U&&(0===(null===v||void 0===v||null===(a=v.buyInfo)||void 0===a?void 0:a.providers.length)||!(null!==v&&void 0!==v&&v.supportedCryptoCurrencies.has(O.symbol)));return _(_({},I),{},{account:O,onSubmit:async()=>{const e=I.getValues(),t=e.fiatInput,n=e.cryptoInput,a={wantCrypto:!t,fiatCurrency:e.currencySelect.value.toUpperCase(),receiveCurrency:e.cryptoSelect.value,country:e.countrySelect.value,fiatStringAmount:t,cryptoStringAmount:n};await x(a),await N(O.symbol,O.index,O.accountType);const i=await f.a.getBuyQuotes(a),[r,o]=Object(y.g)(i),l=Object(y.c)(a,r);l?C(l):(await w(r,o),R("wallet-coinmarket-buy-offers",{symbol:O.symbol,accountIndex:O.index,accountType:O.accountType}))},defaultCountry:A,defaultCurrency:F,register:M,buyInfo:v,accountHasCachedRequest:L,cachedAccountInfo:o,saveQuoteRequest:x,saveQuotes:w,quotesRequest:b,saveCachedAccountInfo:N,saveTrade:S,amountLimits:h,setAmountLimits:C,isLoading:U,noProviders:P,network:g})})(ne(ne({},e),{},{selectedAccount:t}));return ee(g.k,null,ee(v.Provider,{value:n},ee($,null)))};t.a=Object(h.b)((e=>({selectedAccount:e.wallet.selectedAccount,quotesRequest:e.wallet.coinmarket.buy.quotesRequest,cachedAccountInfo:e.wallet.coinmarket.buy.cachedAccountInfo})))((e=>{const{selectedAccount:t}=e;return"loaded"!==t.status?ee(g.s,{title:"TR_NAV_BUY",account:t}):ee(ae,Object(a.a)({},e,{selectedAccount:t}))}))}}]);
//# sourceMappingURL=5c870ddf0b16134144206cc85e33132cf5abcbbd.0525f280696c75a598a5.js.map